<!DOCTYPE html>
<html><head>
  <meta name="generator" content="njnmdoc, see http://github.com/njnmco/njnmdoc" />
  <meta charset="UTF-8"><title></title>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.10.2/dist/katex.min.css" integrity="sha384-yFRtMMDnQtDRO8rLpMIKrtPCD5jdktao2TV19YiZYWMDkUR5GQZR/NOVTdquEx1j" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.10.2/dist/katex.min.js" integrity="sha384-9Nhn55MVVN0/4OFx7EE5kpFBPsEMZxKTCnA+4fqDmg12eCTqGi6+BB2LjY8brQxJ" crossorigin="anonymous"></script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.10.2/dist/contrib/auto-render.min.js" integrity="sha384-kWPLUVMOks5AQFrykwIup5lo0m3iMkkHrD0uJ4H5cjeGihAutqP0yW0J6dpFiVkI" crossorigin="anonymous"
    onload="renderMathInElement(document.body);"></script><link rel='stylesheet' type='text/css' href='https://unpkg.com/sakura.css/css/sakura.css' /></head><body><header><h1></h1>
</header>
<article><p>Lua is a great, tiny, embeddable language.</p>
<p>It is designed primarily around the table data structure.</p>
<p>In your C source, you will need to include the lua header:</p>
<p>#include &lt;lua5.2/lua.h&gt;</p>
<p>#include &lt;lua5.2/lauxlib.h&gt;</p>
<p>Each function you wish to export is written with the same types:</p>
<p>static int l_listen(lua_State *L)</p>
<p>And add a stub function that returns the function table:</p>
<p>static const struct luaL_Reg conkyhttpd [] = {</p>
<pre><code>{&quot;listen&quot;, l_listen},

{&quot;setup&quot;, l_setup},

{&quot;cleanup&quot;, l_cleanup},

{NULL, NULL}  /* sentinel */
</code></pre>
<p>};</p>
<p>int luaopen_conkyhttpd(lua_State *L)</p>
<p>{</p>
<pre><code>luaL_openlib(L, &quot;conkyhttpd&quot;, conkyhttpd, 0);

return 1;
</code></pre>
<p>}</p>
<p>You need to compile your C source as a shared library:</p>
<p>gcc -llua5.2 -fPIC -shared -o webconky.so webconky.c</p>
<p>Having done all that, in lua you should be able to load up the module.</p>
<p>require(webconky)</p>
<p>--alternatively, load it manually</p>
<p>mylib = loadlib(&quot;fullname-of-your-library&quot;, &quot;luaopen_mylib&quot;)</p>
<p>mylib()</p>
<p><a href="http://torch.ch/">Torch | Scientific computing for LuaJIT.</a></p>
</article>
<footer>Page generated by <a href="https://github.com/njnmco/njnmdoc" target="blank">njnmdoc</a>.
Last updated on&nbsp;2020-11-18.</footer>
</body>
</html>